:root {
	--duration: 0.5s;
	--backdrop-opacity: 0.25;
	color-scheme: light dark;
}

body {
	--progress: 1;
	--roundness: calc((1 - var(--progress)) * 1rem);
	transition: scale, clip-path;
	transition-duration: var(--duration);
	transform-origin: bottom;
	scale: calc(0.94 + var(--progress) * 0.06);
	clip-path: inset(0 round var(--roundness) var(--roundness) 0 0);
}

html {
	background-color: black;
}

body {
	background-color: light-dark(color-mix(in oklab, #fcfcfc 80%, grey), color-mix(in oklab, #222222 90%, black));
	margin: 0;
	position: fixed;
	inset: 0;
}

dialog {
	--progress: 1;
	--box-shadow-color: #0004;
	width: 100%;
	margin-bottom: 0;
	margin-top: auto;
	padding: 0;
	max-width: 100%;
	max-height: 100%;
	box-sizing: border-box;
	border: none;
	outline: none;
	border-radius: 1rem 1rem 0 0;
	background-color: light-dark(#fcfcfc, #222222);
	color: light-dark(#222222, #fcfcfc);
	box-shadow: 0 -8px 8px 0 var(--box-shadow-color);
	transition-property: transform, translate, scale;
	transition-duration: var(--duration);
	transition-timing-function: cubic-bezier(0.32, 0.72, 0, 1);
	transform-origin: top;
	overflow: clip;
	overscroll-behavior-y: none;
	display: flex;
	flex-direction: column;

	&[open] {
		@starting-style {
			translate: 0 100%;
		}
		/* only top 2 dialogs have backdrop and box-shadow */
		&:not(:nth-last-of-type(-n + 2)) {
			--backdrop-opacity: 0;
			--box-shadow-color: #0000;
		}
		&:not(:last-of-type) {
			scale: calc(0.94 + var(--progress) * 0.06);
			transform: translateY(calc(var(--progress) * 8px - 8px));
		}
		&::backdrop {
			background-color: black;
			opacity: var(--backdrop-opacity);
			transition: opacity;
			transition-duration: var(--duration);
			@starting-style {
				opacity: 0;
			}
		}
	}
}
